<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lab 8: Building Mr. Roboto ‚Äì Session 2</title>
<style>
body { font-family: Arial, sans-serif; background-color:#121212; color:#e0e0e0; margin:0; padding:0; font-size:1.05em;}
header { background-color:#000; padding:40px 20px; text-align:center; }
header h1 { color:#c29fff; margin:0; }
header p { color:#bbbbbb; margin:5px 0 20px 0; }
nav { background-color:#111; padding:14px 0; text-align:center; position:sticky; top:0; z-index:100; }
nav a { margin:0 20px; text-decoration:none; color:#fff; font-weight:bold; font-size:1.1em; }
nav a:hover { color:#c29fff; }
.container { display:flex; flex-wrap:wrap; justify-content:space-between; width:90%; max-width:1300px; margin:25px auto; gap:20px; }
.main-content { flex:3; min-width:300px; }
.sidebar { flex:1; min-width:250px; background-color:#1e1e2e; padding:10px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.5); display:flex; flex-direction:column; align-items:center; }
.sidebar img { width:100%; max-width:400px; border-radius:8px; margin-bottom:10px; }
.section { background-color:#1e1e2e; padding:25px; margin-bottom:20px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.5); }
.section h2 { color:#c29fff; margin-top:0; }
.checkoff { color:red; font-weight:bold; }
img.inline { width:100%; border-radius:8px; margin:10px 0; }
pre { background-color:#000; color:#fff; padding:10px; border-radius:6px; overflow-x:auto; }
code { font-family: Consolas, monospace; }
footer { text-align:center; padding:20px; background-color:#111; color:#bbbbbb; margin-top:20px; font-size:0.9em; }
@media(max-width:1000px){.container{flex-direction:column;}}
</style>
</head>
<body>

<header>
<h1>Lab 8: Building Mr. Roboto (Part 2)</h1>
<p>Session 2 ‚Äî Sensors & Autonomous Behavior</p>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="lab.html">Labs</a>
  <a href="#instructors">Instructors</a>
  <a href="#about">About</a>
</nav>

<div class="container">
  <div class="main-content">

    <!-- INTRO -->
    <div class="section">
      <h2>Introduction</h2>
      <p>
      This is the second in a series of two labs introducing building and programming your robot. 
      We will add sensors so it can interact with its environment. You‚Äôll start with photoresistors to guide the robot toward the brightest üåü light üåü and then implement additional behaviors.
      </p>
    </div>

    <!-- SAFETY -->
    <div class="section">
      <h2>ü¶∫ Safety & Important Tips</h2>
      <p><strong>(1 minute read)</strong></p>
      <ul>
        <li>Unpower your circuit when making any change</li>
        <li>Double check your wiring before plugging in</li>
        <li>Watch for solder bridges</li>
        <li>Components can be fragile‚Äîtreat them carefully</li>
      </ul>
    </div>

    <!-- FABRICATION QUEST -->
    <div class="section">
      <h2>üî® Fabrication Quest of the Day</h2>
      <p>You will use sensors to control your robotic car:</p>
      <ul>
        <li>Read values from sensors</li>
        <li>Guide robot toward light using photoresistors</li>
        <li>Implement additional behaviors with other sensors</li>
      </ul>
      <img src="cat1.png" class="inline" alt="Photoresistor wiring">
    </div>

    <!-- SOFTWARE -->
    <div class="section">
      <h2>üèóÔ∏è Software & Hardware</h2>
      <p><strong>Software:</strong> Arduino IDE</p>
      <p><strong>Hardware:</strong> Assembled Mr. Roboto, Ultrasonic Sensor, Photoresistors, Jumper Wires, Flashlight, Misc sensors</p>
      <img src="cat2.png" class="inline" alt="Additional sensor setup">
    </div>

    <!-- PART 1 -->
    <div class="section">
      <h2>Part (1): Reading Values from Photoresistors</h2>
      <p>Initialize the library at the top of your sketch (above <code>setup()</code>):</p>
      <pre><code>#include &lt;AFMotor.h&gt;</code></pre>

      <p>Create motor objects for the two motors (above <code>setup()</code>):</p>
      <pre><code>AF_DCMotor rightMotor(1);  // Motor connected to M1
AF_DCMotor leftMotor(2);   // Motor connected to M2</code></pre>

      <p>Read values from the photoresistor:</p>
      <pre><code>const int Photoresistor = A0;

void setup() {
    Serial.begin(9600); // Initialize Serial Monitor
}

void loop() {
    int photoValue = analogRead(Photoresistor);
    Serial.print("PhotoResistor: ");
    Serial.println(photoValue);
    delay(20);
}</code></pre>

      <p class="checkoff">Checkoff 1: Ask your instructor for a check-off on adding and testing your photoresistor.</p>
    </div>

    <!-- PART 2 -->
    <div class="section">
      <h2>Part (2): Adding Multiple Photoresistors</h2>
      <pre><code>const int rightPhotoresistor = A0;
const int middlePhotoresistor = A1;
const int leftPhotoresistor = A2;

void loop() {
    int rightValue = analogRead(rightPhotoresistor) - ambientThresholdR;
    int middleValue = analogRead(middlePhotoresistor) - ambientThresholdM;
    int leftValue = analogRead(leftPhotoresistor) - ambientThresholdL;

    Serial.print("Left: ");
    Serial.print(leftValue);
    Serial.print("  Middle: ");
    Serial.print(middleValue);
    Serial.print("  Right: ");
    Serial.println(rightValue);

    delay(20);
}</code></pre>
      <p class="checkoff">Checkoff 2: Show the serial monitor values and explain the purpose of multiple photoresistors.</p>
      <img src="cat3.png" class="inline" alt="Multiple photoresistors setup">
    </div>

    <!-- PART 3 -->
    <div class="section">
      <h2>Part (3): Writing a Nicer Motor Function</h2>
      <pre><code>void setLeftSpeed(int value) {
    if (value &gt; 0) {
        leftMotor.setSpeed(value);
        leftMotor.run(FORWARD);
    } else if (value &lt; 0) {
        leftMotor.setSpeed(-value);
        leftMotor.run(BACKWARD);
    } else {
        leftMotor.run(RELEASE);
    }
}

void setRightSpeed(int value) {
    if (value &gt; 0) {
        rightMotor.setSpeed(value);
        rightMotor.run(FORWARD);
    } else if (value &lt; 0) {
        rightMotor.setSpeed(-value);
        rightMotor.run(BACKWARD);
    } else {
        rightMotor.run(RELEASE);
    }
}</code></pre>
      <p class="checkoff">Checkoff 3: Show motor speed changes in response to photoresistor values.</p>
    </div>

    <!-- PART 4 -->
    <div class="section">
      <h2>Part (4): Light Following BANG-BANG Controller</h2>
      <pre><code>const int variationThreshold = 50;
const int bang = 50;

void loop() {
    int rightValue = analogRead(rightPhotoresistor) - ambientThresholdR;
    int middleValue = analogRead(middlePhotoresistor) - ambientThresholdM;
    int leftValue = analogRead(leftPhotoresistor) - ambientThresholdL;

    // Determine if variation is too low
    int maxDifference = max(abs(middleValue - leftValue), abs(middleValue - rightValue));

    if (maxDifference &lt; variationThreshold) {
        setLeftSpeed(0);
        setRightSpeed(0);
    } else if (middleValue &gt; leftValue &amp;&amp; middleValue &gt; rightValue) {
        setLeftSpeed(100);
        setRightSpeed(100);
    } else if (leftValue &gt; rightValue) {
        setLeftSpeed(100);
        setRightSpeed(150);
    } else {
        setLeftSpeed(150);
        setRightSpeed(100);
    }
    delay(50);
}</code></pre>
      <p class="checkoff">Checkoff 4: Show the robot following light.</p>
    </div>

    <!-- SIDEBAR IMAGE -->
  </div>
  <div class="sidebar">
    <img src="cat10.png" alt="Mr Roboto with sensors">
  </div>
</div>

<footer>
All instructions credited to MISTI Teaching Team | UTB Student Labs 2025
</footer>

</body>
</html>

